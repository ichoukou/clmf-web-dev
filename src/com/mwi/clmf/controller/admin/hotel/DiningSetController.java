package com.mwi.clmf.controller.admin.hotel;import com.jfinal.core.Controller;import com.jfinal.plugin.activerecord.Page;import com.mwi.clmf.model.guest.GuestDiningModel;import com.mwi.clmf.model.hotel.DinningStandModel;import com.mwi.clmf.model.staff.WorkeDiningModel;public class DiningSetController extends Controller {	public void index(){		String chinese_name=getPara("chinese_name");		String english_name=getPara("english_name");		String ch_organ_name=getPara("ch_organ_name");		String post=getPara("post");		String national=getPara("national");		String is_bind_DiningStand=getPara("is_bind_DiningStand");		String realname=getPara("realname");		String sex=getPara("sex");		String unit=getPara("unit");		String post1=getPara("post");		String is_bind_DiningStand1=getPara("is_bind_DiningStand");		String group_id=getPara("group_id");				Integer pageNumber = getParaToInt("pageNumber");		if(pageNumber == null){			pageNumber = 1;		}		int pageSize = 10;		if(!"".equals(getPara("pageSize")) && getPara("pageSize") != null){			pageSize = getParaToInt("pageSize");		}				if(!"".equals(getPara("pageNumber")) && getPara("pageNumber") != null){			pageNumber = getParaToInt("pageNumber");		}		String flag = "1";		if("2".equals(getPara("flag"))){			flag = "2";		} else if("3".equals(getPara("flag"))) {			flag = "3";		} 		setAttr("flag", flag);		System.out.println("flagflagflagflagflagflagflag:::::"+flag);		Page<GuestDiningModel> pageList = GuestDiningModel.GMDao.getGuestList(chinese_name, english_name, ch_organ_name, post1, national, is_bind_DiningStand1, pageNumber, pageSize);		Page<WorkeDiningModel> workerpageList=WorkeDiningModel.WMDao.getworkerList(realname, sex, unit, post1, group_id, is_bind_DiningStand1, pageNumber, pageSize, 1);		Page<WorkeDiningModel> postulantpageList =WorkeDiningModel.WMDao.getworkerList(realname, sex, unit, post1, group_id, is_bind_DiningStand1, pageNumber, pageSize, 2);				setAttr("guestDiningList",pageList);		setAttr("workerDiningList",workerpageList);		setAttr("postulantDiningList",postulantpageList);		setAttr("pageNumber", pageNumber);			setAttr("pageSize", pageSize);//		setAttr("dining_date", dining_date);//		setAttr("dining_time", dining_time);//		setAttr("dining_place", dining_place);		//setAttr("count", count);		setAttr("totalPage", pageList.getTotalPage());		setAttr("workertotalPage", workerpageList.getTotalPage());		setAttr("postulanttotalPage", postulantpageList.getTotalPage());				setAttr("dingStand",DinningStandModel.DSMDao.getDiningList());		render("mwi_dining_rights_management.jsp");			}	public void saveOrUpdate(){		String dsId =getPara("dsId");		String dinning_stand_name = getPara("dinning_stand_name");		String dining_date = getPara("dining_date");		String dining_type = getPara("dining_type");		String dining_time = getPara("dining_time");		String dining_place = getPara("dining_place");		String stand_desc = getPara("stand_desc");		Integer max_count = getParaToInt("max_count");		if(dsId!=null){			new DinningStandModel().findById(dsId).				set("dinning_stand_name", dinning_stand_name).				set("dining_date", dining_date).				set("dining_type", dining_type).				set("dining_time", dining_time).				set("dining_place", dining_place).				set("stand_desc", stand_desc).				set("max_count", max_count).				set("cur_count", 0).update();		}else{			new DinningStandModel().				set("dinning_stand_name", dinning_stand_name).				set("dining_date", dining_date).				set("dining_type", dining_type).				set("dining_time", dining_time).				set("dining_place", dining_place).				set("stand_desc", stand_desc).				set("max_count", max_count).				set("cur_count", 0).save();		}		 redirect("/diningset");	}		public void findByDSId(){		renderJson("dStand",DinningStandModel.DSMDao.findById(getPara()));	}		public void delById(){		new DinningStandModel().deleteById(getPara());		redirect("/diningset");	}}